<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>分块运动</title>
	<link rel="stylesheet" type="text/css" href="base.css">
	<script type="text/javascript" src="common1.0.js"></script>
	<style type="text/css">
	#box{
		width: 700px;
		height: 400px;
		background: url(img3/0.jpg);
		margin: 100px auto;
		position: relative;
	}
	#box span{
		background: url(img3/1.jpg);
		position: absolute;
		opacity: 0;
	}
	#btn1{
		width: 100px;
		height: 30px;
		line-height: 30px;
		position: absolute;
		left: 50%;
		top: 20px;
		margin-left: -50px;
	}
	</style>
	<script type="text/javascript">
	domReady(function(){
		var oBox=document.getElementById('box');
		var oBtn=document.getElementById('btn1');

		var R=40;
		var C=1;
		for(var r=0; r<R; r++){
		    for(var c=0; c<C; c++){
		        var oSpan=document.createElement('span');
		        oSpan.style.width=oBox.offsetWidth/C+'px';
		        oSpan.style.height=oBox.offsetHeight/R+'px';

		        oBox.appendChild(oSpan);
		        oSpan.style.left=c*oSpan.offsetWidth+'px';
		        oSpan.style.top=r*oSpan.offsetHeight+'px';
		        oSpan.style.backgroundPosition='-'+c*oSpan.offsetWidth+'px -'+r*oSpan.offsetHeight+'px';
		    }
		}

		var timer;
		var iNow=0;
		var bFlag=false;
		oBtn.onclick=function(){
		    if(bFlag)return;
		    bFlag=true;
		    var aSpan=oBox.getElementsByTagName('span');
		    var n=0;
		    iNow++;

		    if(iNow%3==0){
		        oBox.style.backgroundImage='url(img3/2.jpg)';
		    }else{
		        oBox.style.backgroundImage='url(img3/'+(iNow%3-1)+'.jpg)';
		    }


		    timer=setInterval(function(){
		        aSpan[n].style.opacity=0;
		        aSpan[n].style.backgroundImage='url(img3/'+iNow%3+'.jpg)';
		        move(aSpan[n], {opacity: 1});
		        n++;

		        if(n==aSpan.length){
		            clearInterval(timer);
		            bFlag=false;
		        }
		    }, 100);
		};
	})
	</script>
</head>
<body>
	<input type="button" value="换一张" id="btn1">
    <div id="box">
    </div>

</body>
</html>